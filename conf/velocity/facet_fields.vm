#if($response.facetFields)
    ##    <h2 #annTitle("Facets generated by adding &facet.field= to the request")>Field Facets</h2>
<div id="facet_tabs">
    <ul>
        #foreach($field in $response.facetFields)
            #if($field.name!='p_source')
                <li style="font-size:10px"><font size="1"><a href="#$field.name" id="facet$field.name">$field.name  ###$import.read("https://dev.rgd.mcw.edu/solr/OntoSolr/select?v.template=termsstring&wt=velocity&q=id:(%22$field.name%22)")
            </a></font></li>
                #else
                    <li style="font-size:10px"><font size="1"><a href="#$field.name">Source  ###$import.read("https://dev.rgd.mcw.edu/solr/OntoSolr/select?v.template=termsstring&wt=velocity&q=id:(%22$field.name%22)")
                    </a></font></li>
            #end
        #end
    </ul>
    #foreach($field in $response.facetFields)
        <div id="$field.name" class="result-terms">
            ###<span class="facet-field">$field.name</span>

            <a href="javascript:facetQuery('$field.name', '*')">All</a>
            <ul>
                #set ($fieldType=$field.name.substring($math.sub($field.name.length(),3), $field.name.length()))
                #foreach($facet in $field.values)
                    <li>
                        #if($fieldType && $fieldType == "_id")
                            <a href="javascript:facetQuery('$field.name', '$facet.name')" id="facet$facet.name">$field.name  ###$import.read("https://dev.rgd.mcw.edu/solr/OntoSolr/select?v.template=termsstring&wt=velocity&q=id:(%22$facet.name%22)")
                            </a> ($number.format("#*,*",$facet.count))
                        #else

                            <a href="javascript:facetQuery('$field.name', '$facet.name')">$facet.name</a> ($number.format("#*,*",$facet.count))
                        #end
                    </li>
                #end
            </ul>
        </div>
    #end
</div>
#end
<script type="text/javascript">
    $(document).ready(function() {
        #foreach($field in $response.facetFields)
            setFacetFieldName('$field.name')
        #end
        #foreach($field in $response.facetFields)
                #set ($fieldType=$field.name.substring($math.sub($field.name.length(),3), $field.name.length()))
                #foreach($facet in $field.values)
                    #if($fieldType && $fieldType == "_id")
                        setFacetFieldName('$facet.name')

                    #end

                #end
        #end
    })
    function setFacetFieldName(fieldName) {
        $.get("https://dev.rgd.mcw.edu/solr/OntoSolr/select?v.template=termsstring&wt=velocity&q=id:(%22"+fieldName+"%22)", function (data) {
            var elementId='facet'+fieldName
            var facetElement=document.getElementById(elementId)
            facetElement.innerHTML= data
        })

    }
</script>
